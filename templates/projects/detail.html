{% extends 'post_login_base/base.html' %}

{% block title %}{{ project.title }}{% endblock title %}

{% block content %}
    <div style="position: relative;" >
        {% if project.image %}
        <div class="project-image-container" style="width: 100%; height: 100%; overflow: hidden;">
            <img src="{{ project.image.url }}" alt="" class="img-fluid" style="width: 100%; height: 100%; object-fit: cover;">
        </div>
        {% endif %}
        <div class="project-box" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            <div class="p-5 m-5 d-flex  justify-content-between align-items-stretch rounded" style="background-color: rgba(0, 0, 0, 0.25); width: 1000px; height: 500px;">
                <div >
                    <h4 class="font-weight-bold text-white justify-content-between mb-1">Title:</h4>
                        <div class="title-card card bg-white font-weight-bold text-dark ">
                            {{ project.title }}
                        </div>
                    <div class="card bg-transparent mt-5" style=" width: 200px; height: 200px ">
                        <div class="card-body">
                            <h5 class="font-weight-bold text-dark">Description:</h5>
                            <div class="rounded bg-white p-2">
                                {{ project.description }}
                            </div>
                        </div>
                    </div>
                </div>  
            
                <div>
                    <h4 class="font-weight-bold text-white justify-content-between mb-1">Tasks :</h4>
                    <ul class="list-group ">
                        {% for task in project.tasks.all %}
                            <li class="list-group-item mb-3">
                                <div class="form-check">
                                    <form action="{% url 'projects:mark_complete' task.slug task.date_created.year task.date_created.month task.date_created.day %}" method="post">
                                        {% csrf_token %}
                                        <input class="form-check-input" type="checkbox" id="task-{{ task.id }}" name="task-{{ task.id }}" {% if task.status == 'c' %}checked{% endif %} onclick="this.form.submit()">
                                        <label class="form-check-label" for="task-{{ task.id }}">{{ task.description }} ({{ task.date_due }})</label>
                                    </form>
                                </div>
                                <div>
                                    <a href="{% url 'projects:edit_task' task.slug task.date_created.year task.date_created.month task.date_created.day %}" class="btn btn-primary">Edit</a>
                                    <a href="{% url 'projects:delete_task' task.slug task.date_created.year task.date_created.month task.date_created.day %}" class="btn btn-danger">Delete</a>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                    <a href="{% url 'projects:create_task' project.slug project.date_created.year project.date_created.month project.date_created.day %}" class="btn btn-success">Add Tasks</a>
                </div>
            </div>
        </div>
    </div>

{% endblock content %}
